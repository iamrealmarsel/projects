(this["webpackJsonpreact-sneakers"]=this["webpackJsonpreact-sneakers"]||[]).push([[0],{17:function(e,t,a){e.exports={cartItems:"CartItems_cartItems__32cTy",cartItem:"CartItems_cartItem__2anMw",cartItemContent:"CartItems_cartItemContent__r53cb",cartItemTitle:"CartItems_cartItemTitle__klBBW",cartItemImg:"CartItems_cartItemImg__shUCt",cartItemPrice:"CartItems_cartItemPrice__2lW1K",cartItemRemove:"CartItems_cartItemRemove__Rzz5Z",drawerOrder:"CartItems_drawerOrder__2FpKU",greenButton:"CartItems_greenButton__2NQqF","button-loading":"CartItems_button-loading__NKa5F"}},18:function(e,t,a){e.exports={header:"Header_header__1v0yI",headerLeft:"Header_headerLeft__3xOD1",headerInfoTitle:"Header_headerInfoTitle__q3iwk",headerInfoDesc:"Header_headerInfoDesc__3lfGX",headerRight:"Header_headerRight__2f-DD",headerRightCart:"Header_headerRightCart__1FKaI",headerRightProfile:"Header_headerRightProfile__1OSAv",headerRightFavorites:"Header_headerRightFavorites__-K55q"}},19:function(e,t,a){e.exports={card:"Card_card__35wN0",cardTitle:"Card_cardTitle__350c8",cardBottom:"Card_cardBottom__33koq",cardPrice:"Card_cardPrice__35ptC",cardPlus:"Card_cardPlus__23A-8",cardFavorite:"Card_cardFavorite__Itdwn"}},24:function(e,t,a){e.exports={content:"Main_content__2FaLO",contentSearch:"Main_contentSearch__3bE-N",contentSearchInput:"Main_contentSearchInput__3gIf5",contentHeader:"Main_contentHeader__p6ua0",contentCards:"Main_contentCards__3wiQi"}},27:function(e,t,a){e.exports={cart:"Cart_cart__3wtkF",image:"Cart_image__2vTEk",title:"Cart_title__1LCeo",text:"Cart_text__1Bds7"}},28:function(e,t,a){e.exports={overlay:"Drawer_overlay__3oE1S",overlayVisible:"Drawer_overlayVisible__1Onpt",drawer:"Drawer_drawer__XaZMH"}},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(43),i=a.n(n),s=a(20),o=a(16),d=a(14),l=a.n(d),u=a(9),j=a(21),h=a(13),b=a(8),m=a.n(b),O=a(6),f=Object(r.createContext)({});function x(){var e=Object(r.useContext)(f),t=e.cartItems,a=e.setCartItems,c=t.reduce((function(e,t){return e+t.price}),0);return{cartItems:t,setCartItems:a,totalPrice:c}}var v=a(27),p=a.n(v),g=a(1);var _=function(e){var t=e.title,a=e.description,r=e.image;return Object(g.jsxs)("div",{className:p.a.cart,children:[Object(g.jsx)("img",{className:p.a.image,src:r,alt:""}),Object(g.jsx)("p",{className:p.a.title,children:t}),Object(g.jsx)("span",{className:p.a.text,children:a})]})},C=a(17),k=a.n(C);var I=function(e){var t=e.onRemoveClick,a=e.items,r=e.onOrderClick,c=e.isLoading,n=e.totalPrice;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:k.a.cartItems,children:a.map((function(e){return Object(g.jsxs)("div",{className:k.a.cartItem,children:[Object(g.jsx)("div",{className:k.a.cartItemImg,style:{backgroundImage:"url(".concat(e.image,")")}}),Object(g.jsxs)("div",{className:k.a.cartItemContent,children:[Object(g.jsx)("p",{className:k.a.cartItemTitle,children:e.title}),Object(g.jsxs)("b",{className:k.a.cartItemPrice,children:[e.price," \u0440\u0443\u0431."]})]}),Object(g.jsx)("img",{className:k.a.cartItemRemove,src:"/img/button-remove.svg",alt:"remove",onClick:function(){return t(e.id)}})]},e.id)}))}),Object(g.jsxs)("div",{className:k.a.drawerOrder,children:[Object(g.jsxs)("ul",{children:[Object(g.jsxs)("li",{children:[Object(g.jsx)("span",{children:"\u0418\u0442\u043e\u0433\u043e:"}),Object(g.jsx)("div",{}),Object(g.jsxs)("b",{children:[n," \u0440\u0443\u0431. "]})]}),Object(g.jsxs)("li",{children:[Object(g.jsx)("span",{children:"\u041d\u0430\u043b\u043e\u0433 5%:"}),Object(g.jsx)("div",{}),Object(g.jsxs)("b",{children:[Math.round(n/100*5)," \u0440\u0443\u0431. "]})]})]}),Object(g.jsxs)("button",{className:k.a.greenButton,onClick:r,disabled:c,children:["\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 ",Object(g.jsx)("img",{src:"/img/arrow.svg",alt:"arrow"})]})]})]})},w=a(28),N=a.n(w);function F(e){return new Promise((function(t){return setTimeout(t,e)}))}var y=function(e){var t=e.onCloseClick,a=e.onRemoveClick,c=e.onOrderClick,n=e.opened,i=Object(r.useState)(!1),s=Object(h.a)(i,2),o=s[0],d=s[1],u=Object(r.useState)(!1),b=Object(h.a)(u,2),O=b[0],f=b[1],v=Object(r.useState)(null),p=Object(h.a)(v,2),C=p[0],k=p[1],w=x(),y=w.cartItems,S=w.setCartItems,P=w.totalPrice,R=function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,m.a.post("https://60de0abd878c890017fa2d30.mockapi.io/orders",{items:y});case 4:t=e.sent,a=t.data,c(a),k(a.id),d(!0),S([]),r=0;case 11:if(!(r<y.length)){e.next=20;break}return n=y[r],e.next=15,m.a.delete("https://60de0abd878c890017fa2d30.mockapi.io/cart/"+n.id);case 15:return e.next=17,F(1e3);case 17:r++,e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),alert("\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0437\u0430\u043a\u0430\u0437\u0430");case 25:f(!1);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"".concat(N.a.overlay," ").concat(n?N.a.overlayVisible:""),onClick:t,children:Object(g.jsxs)("div",{className:N.a.drawer,children:[Object(g.jsxs)("h2",{children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430",Object(g.jsx)("img",{className:N.a.cartItemRemove,src:"/img/button-remove.svg",alt:"remove",onClick:t})]}),y.length>0?Object(g.jsx)(I,{onRemoveClick:a,items:y,onOrderClick:R,isLoading:O,totalPrice:P}):Object(g.jsx)(_,{title:o?"\u0417\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d!":"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430",description:o?"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 #".concat(C," \u0441\u043a\u043e\u0440\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043a\u0443\u0440\u044c\u0435\u0440\u0441\u043a\u043e\u0439 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0435"):"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u043f\u0430\u0440\u0443 \u043a\u0440\u043e\u0441\u0441\u043e\u0432\u043e\u043a, \u0447\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437.",image:o?"/img/order.png":"/img/cart.png"})]})})},S=a(18),P=a.n(S);var R=function(e){var t=e.onCartClick,a=x().totalPrice;return Object(g.jsxs)("header",{className:P.a.header,children:[Object(g.jsx)(s.b,{to:"/",children:Object(g.jsxs)("div",{className:P.a.headerLeft,children:[Object(g.jsx)("img",{width:"40",height:"40",src:"/img/logo.png",alt:""}),Object(g.jsxs)("div",{className:P.a.headerInfo,children:[Object(g.jsx)("h3",{className:P.a.headerInfoTitle,children:"React Sneackers"}),Object(g.jsx)("p",{className:P.a.headerInfoDesc,children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043b\u0443\u0447\u0448\u0438\u0445 \u043a\u0440\u043e\u0441\u0441\u043e\u0432\u043e\u043a"})]})]})}),Object(g.jsxs)("ul",{className:P.a.headerRight,children:[Object(g.jsxs)("li",{onClick:t,className:P.a.headerRightCart,children:[Object(g.jsx)("img",{src:"/img/cart.svg",alt:""}),Object(g.jsxs)("span",{children:[a," \u0440\u0443\u0431."]})]}),Object(g.jsx)("li",{className:P.a.headerRightFavorites,children:Object(g.jsx)(s.b,{to:"/favorites",children:Object(g.jsx)("img",{src:"/img/favorites.svg",alt:""})})}),Object(g.jsx)("li",{className:P.a.headerRightProfile,children:Object(g.jsx)(s.b,{to:"/orders",children:Object(g.jsx)("img",{src:"/img/user.svg",alt:""})})})]})]})},L=a(45),T=a(19),V=a.n(T);var A=function(e){var t=e.id,a=e.price,r=e.image,c=e.title,n=e.onFavoriteClick,i=e.onPlusClick,s=e.isAdded,o=e.isFavorite,d=e.favorited,l=void 0!==d&&d,u=e.loading,j=void 0!==u&&u,h={price:a,image:r,title:c,id:t,parentId:t},b=null,m=function(){n(h)};return n&&(b=l?Object(g.jsx)("div",{className:V.a.cardFavorite,onClick:m,children:Object(g.jsx)("img",{src:"/img/heart-liked.svg",alt:"liked"})}):Object(g.jsx)("div",{className:V.a.cardFavorite,onClick:m,children:Object(g.jsx)("img",{src:o(t)?"/img/heart-liked.svg":"/img/heart-unliked.svg",alt:"liked"})})),Object(g.jsx)("div",{className:V.a.card,children:j?Object(g.jsxs)(L.a,{speed:2,width:158,height:204,viewBox:"0 0 158 204",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(g.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"158",height:"90"}),Object(g.jsx)("rect",{x:"0",y:"100",rx:"0",ry:"0",width:"158",height:"15"}),Object(g.jsx)("rect",{x:"0",y:"122",rx:"0",ry:"0",width:"100",height:"15"}),Object(g.jsx)("rect",{x:"0",y:"160",rx:"8",ry:"8",width:"80",height:"25"}),Object(g.jsx)("rect",{x:"126",y:"154",rx:"8",ry:"8",width:"32",height:"32"})]}):Object(g.jsxs)(g.Fragment,{children:[b,Object(g.jsx)("img",{width:"133",height:"112",src:r,alt:""}),Object(g.jsx)("h5",{className:V.a.cardTitle,children:c}),Object(g.jsxs)("div",{className:V.a.cardBottom,children:[Object(g.jsxs)("div",{className:V.a.cardPrice,children:[Object(g.jsx)("span",{children:"\u0426\u0435\u043d\u0430:"}),Object(g.jsxs)("b",{children:[a," \u0440\u0443\u0431."]})]}),i&&Object(g.jsx)("img",{className:V.a.cardPlus,src:s(t)?"/img/button-checked.svg":"/img/button-plus.svg",alt:"plus",onClick:function(){i(h)}})]})]})})},B=a(24),H=a.n(B);var D=function(e){var t=e.children,a=e.onSearchChange,r=e.searchValue,c=e.title;return Object(g.jsxs)("div",{className:H.a.content,children:[Object(g.jsxs)("div",{className:H.a.contentHeader,children:[Object(g.jsx)("h1",{className:H.a.contentTitle,children:r?"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443: ".concat(r):c}),Object(g.jsxs)("div",{className:H.a.contentSearch,children:[Object(g.jsx)("img",{src:"/img/search.svg",alt:"search"}),Object(g.jsx)("input",{onChange:a,value:r,className:H.a.contentSearchInput,type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a..."})]})]}),Object(g.jsx)("div",{className:H.a.contentCards,children:t})]})};var M=function(e){var t=e.searchValue,a=e.onSearchChange,c=e.isLoading,n=Object(r.useContext)(f),i=n.favorites,s=n.handleRemoveFavoriteClick,d=n.handlePlusClickFromFavorites,l=n.isAddedFromFavorites,j=n.isFavorite;return Object(g.jsx)(D,{onSearchChange:a,searchValue:t,title:"\u041c\u043e\u0438 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438",children:function(){var e=i.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));return(c?Object(u.a)(Array(8)):e).map((function(e,t){return Object(r.createElement)(A,Object(o.a)(Object(o.a)({},e),{},{key:t,favorited:!0,onPlusClick:d,onFavoriteClick:s,isFavorite:j,isAdded:l,loading:c}))}))}()})},E=a(86),K=a(84),q=(a(78),a(87)),z=a(85);a(79),a(80);E.a.use([K.a]);var J=function(){return Object(g.jsxs)(q.a,{id:"main",spaceBetween:0,slidesPerView:1,navigation:!0,children:[Object(g.jsx)(z.a,{children:Object(g.jsx)("img",{src:"/img/slider-1.png",alt:"sneackers"})}),Object(g.jsx)(z.a,{children:Object(g.jsx)("img",{src:"/img/slider-2.png",alt:"sneackers"})}),Object(g.jsx)(z.a,{children:Object(g.jsx)("img",{src:"/img/slider-3.png",alt:"sneackers"})})]})};var Q=function(e){var t=e.searchValue,a=e.onSearchChange,c=e.isLoading,n=Object(r.useContext)(f),i=n.isFavorite,s=n.isAdded,d=n.handleFavoriteClick,l=n.handlePlusClick,j=n.items;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(J,{}),Object(g.jsx)(D,{onSearchChange:a,searchValue:t,title:"\u0412\u0441\u0435 \u043a\u0440\u043e\u0441\u0441\u043e\u0432\u043a\u0438",children:function(){var e=j.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));return(c?Object(u.a)(Array(8)):e).map((function(e,t){return Object(g.jsx)(A,Object(o.a)({onPlusClick:l,onFavoriteClick:d,loading:c,isFavorite:i,isAdded:s},e),t)}))}()})]})};var U=function(e){var t=e.onSearchChange,a=e.searchValue,c=e.isLoading,n=Object(r.useContext)(f).orders;return Object(g.jsx)(D,{onSearchChange:t,searchValue:a,title:"\u041c\u043e\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0438",children:function(){var e=n.filter((function(e){return e.title.toLowerCase().includes(a.toLowerCase())}));return(c?Object(u.a)(Array(8)):e).map((function(e,t){return Object(r.createElement)(A,Object(o.a)(Object(o.a)({},e),{},{key:t,loading:c}))}))}()})};var W=function(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)([]),i=Object(h.a)(n,2),s=i[0],d=i[1],b=Object(r.useState)([]),x=Object(h.a)(b,2),v=x[0],p=x[1],_=Object(r.useState)([]),C=Object(h.a)(_,2),k=C[0],I=C[1],w=Object(r.useState)(""),N=Object(h.a)(w,2),F=N[0],S=N[1],P=Object(r.useState)(!1),L=Object(h.a)(P,2),T=L[0],V=L[1],A=Object(r.useState)(!0),B=Object(h.a)(A,2),H=B[0],D=B[1];Object(r.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,a,r,n,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([m.a.get("https://60de0abd878c890017fa2d30.mockapi.io/cart"),m.a.get("https://60de0abd878c890017fa2d30.mockapi.io/favorites"),m.a.get("https://60de0abd878c890017fa2d30.mockapi.io/items"),m.a.get("https://60de0abd878c890017fa2d30.mockapi.io/orders")]);case 3:t=e.sent,a=Object(h.a)(t,4),r=a[0],n=a[1],i=a[2],s=a[3],D(!1),d(r.data),p(n.data),I(s.data.reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(t.items))}),[])),c(i.data),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),alert("\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0445");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var E=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=v.find((function(e){return e.parentId===t.id})))){e.next=7;break}m.a.delete("https://60de0abd878c890017fa2d30.mockapi.io/favorites/".concat(a.id)),p((function(e){return e.filter((function(e){return e.parentId!==t.id}))})),e.next=12;break;case 7:return e.next=9,m.a.post("https://60de0abd878c890017fa2d30.mockapi.io/favorites",t);case 9:r=e.sent,c=r.data,p((function(e){return[].concat(Object(u.a)(e),[c])}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("\u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u0444\u0430\u0432\u043e\u0440\u0438\u0442\u044b");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=s.find((function(e){return e.parentId===t.id})))){e.next=7;break}m.a.delete("https://60de0abd878c890017fa2d30.mockapi.io/cart/".concat(a.id)),d((function(e){return e.filter((function(e){return e.parentId!==t.id}))})),e.next=12;break;case 7:return e.next=9,m.a.post("https://60de0abd878c890017fa2d30.mockapi.io/cart",t);case 9:r=e.sent,c=r.data,d((function(e){return[].concat(Object(u.a)(e),[c])}));case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(l.a.mark((function e(t){var a,r,c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=v.find((function(e){return e.id===t.id})),!(r=s.find((function(e){return e.parentId===a.parentId})))){e.next=8;break}m.a.delete("https://60de0abd878c890017fa2d30.mockapi.io/cart/".concat(r.id)),d((function(e){return e.filter((function(e){return e.id!==r.id}))})),e.next=14;break;case 8:return t=Object(o.a)(Object(o.a)({},t),{},{parentId:a.parentId}),e.next=11,m.a.post("https://60de0abd878c890017fa2d30.mockapi.io/cart",t);case 11:c=e.sent,n=c.data,d((function(e){return[].concat(Object(u.a)(e),[n])}));case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),z=function(e){S(e.currentTarget.value)};return Object(g.jsx)(f.Provider,{value:{cartItems:s,items:a,favorites:v,orders:k,isAdded:function(e){return s.some((function(t){return t.parentId===e}))},isAddedFromFavorites:function(e){var t=v.find((function(t){return t.id===e}));return s.some((function(e){return e.parentId===t.parentId}))},isFavorite:function(e){return v.some((function(t){return t.parentId===e}))},setCartOpened:V,setCartItems:d,handlePlusClick:K,handlePlusClickFromFavorites:q,handleFavoriteClick:E,handleRemoveFavoriteClick:function(e){try{m.a.delete("https://60de0abd878c890017fa2d30.mockapi.io/favorites/".concat(e.id)),p((function(t){return t.filter((function(t){return t.id!==e.id}))}))}catch(t){alert("\u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0444\u0430\u0432\u043e\u0440\u0438\u0442\u043e\u0432")}}},children:Object(g.jsxs)("div",{className:"wrapper",children:[Object(g.jsx)(y,{onCloseClick:function(e){e.currentTarget===e.target&&V(!1)},onRemoveClick:function(e){try{m.a.delete("https://60de0abd878c890017fa2d30.mockapi.io/cart/".concat(e)),d((function(t){return t.filter((function(t){return t.id!==e}))}))}catch(t){alert("\u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b")}},onOrderClick:function(e){I((function(t){return[].concat(Object(u.a)(t),Object(u.a)(e.items))}))},opened:T}),Object(g.jsx)(R,{onCartClick:function(){V(!0)}}),Object(g.jsx)(O.a,{path:"/",exact:!0,children:Object(g.jsx)(Q,{searchValue:F,onSearchChange:z,isLoading:H})}),Object(g.jsx)(O.a,{path:"/favorites",exact:!0,children:Object(g.jsx)(M,{searchValue:F,onSearchChange:z,isLoading:H})}),Object(g.jsx)(O.a,{path:"/orders",exact:!0,children:Object(g.jsx)(U,{searchValue:F,onSearchChange:z,isLoading:H})})]})})};a(81);i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(s.a,{children:Object(g.jsx)(W,{})})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.ee161285.chunk.js.map